# Description:  A lightweight Tox client (git version)
# URL:  https://utox.org
# Maintainer:  z3bra, willy at mailoo dot org
# Depends on:  toxcore filter_audio xorg-libx11 openal freetype cmake v4l-utils

name=utox
version=git-d19148d2
sversion=d19148d23bd0f4b19e8f1a7ea84097ac242c0b83
release=2
source=()

gitsource=https://github.com/GrayHatter/uTox.git

build() {
    cd $PKGMK_SOURCE_DIR

    if cd $name; then
        git reset --hard
        git pull $gitsource
    else
        git clone $gitsource $name
        cd $name
    fi

    git checkout $sversion

    cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr .

    sed -i 's,$(PREFIX)/share/man,$(MANPREFIX),' Makefile

    make V4LCONVERT=0 DBUS=0
    make DESTDIR=$PKG MANPREFIX=/usr/share/man install
}
# vim: set ft=sh ts=4 et:
